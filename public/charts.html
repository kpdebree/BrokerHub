<!DOCTYPE html>
<html>
<head>
    <title>Charts</title>
    <!-- <link rel="stylesheet" type="text/css" href="./css/reset.css"> -->
    <link rel="stylesheet" type="text/css" href="./css/style.css">
    <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.1/Chart.bundle.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.2.6/jquery.js"></script>
</head>
<body>
<nav class="navbar navbar-inverse">
  <div class="container-fluid">
    <div class="navbar-header">
      <a class="navbar-brand" href="#">BrokerHub</a>
    </div>
    <ul class="nav navbar-nav">
      <li><a href="./index.html">Home</a></li>
      <li class="active"><a href="./charts.html">Charts</a></li>
    </ul>
  </div>
</nav>

<!-- <nav class="navbar navbar-toggleable-md navbar-light bg-faded">
  <a class="navbar-brand" href="#">Navbar</a>
  <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
    <div class="navbar-nav">
      <a class="nav-item nav-link active" href="./index.html">Home <span class="sr-only"></span></a>
      <a class="nav-item nav-link" href="./charts.html">Charts</a>
    </div>
  </div>
</nav> -->

    <section class="intro">
        <row>
            <div class="col-sm-4 left">

            </div>

            <div class="col-sm-4 left"> 
                <canvas id="myChart" style="width:50%; height:50%"></canvas>
            </div>
        
            <div class="col-sm-4">

            </div>

        </row>

    </section>



<script>
var ctx = document.getElementById("myChart");
var myChart = new Chart(ctx, {
    type: 'bar',
    data: {
        labels: ["Red", "Blue", "Yellow", "Green", "Purple", "Orange"],
        datasets: [{
            label: '# of Votes',
            data: [12, 19, 3, 5, 2, 3],
            backgroundColor: [
                'rgba(255, 99, 132, 0.2)',
                'rgba(54, 162, 235, 0.2)',
                'rgba(255, 206, 86, 0.2)',
                'rgba(75, 192, 192, 0.2)',
                'rgba(153, 102, 255, 0.2)',
                'rgba(255, 159, 64, 0.2)'
            ],
            borderColor: [
                'rgba(255,99,132,1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 159, 64, 1)'
            ],
            borderWidth: 1
        }]
    },
    options: {
        scales: {
            yAxes: [{
                ticks: {
                    beginAtZero:true
                }
            }]
        }
    }
});

function getData() {
    $.get("/api/analytics", function(data) {
        console.log(data);
        // initChart(data);
        console.log("Length: " + data.length)
        
    })
};

$(document).ready(function() { 


    getData();
  
});

// function initChart(data) {

// for (var i = 0; )

// }


// function drawLineChart() {

//   // Add a helper to format timestamp data
//   Date.prototype.formatMMDDYYYY = function() {
//       return (this.getMonth() + 1) +
//       "/" +  this.getDate() +
//       "/" +  this.getFullYear();
//   }

//   var jsonData = $.ajax({
//     url: 'http://d.microbuilder.io:8080/test/temp',
//     dataType: 'json',
//   }).done(function (results) {

//     // Split timestamp and data into separate arrays
//     var labels = [], data=[];
//     results["packets"].forEach(function(packet) {
//       labels.push(new Date(packet.timestamp).formatMMDDYYYY());
//       data.push(parseFloat(packet.payloadString));
//     });

//     // Create the chart.js data structure using 'labels' and 'data'
//     var tempData = {
//       labels : labels,
//       datasets : [{
//           fillColor             : "rgba(151,187,205,0.2)",
//           strokeColor           : "rgba(151,187,205,1)",
//           pointColor            : "rgba(151,187,205,1)",
//           pointStrokeColor      : "#fff",
//           pointHighlightFill    : "#fff",
//           pointHighlightStroke  : "rgba(151,187,205,1)",
//           data                  : data
//       }]
//     };

//     // Get the context of the canvas element we want to select
//     var ctx = document.getElementById("myChart").getContext("2d");

//     // Instantiate a new chart
//     var myLineChart = new Chart(ctx).Line(tempData);
//   });
// }

// drawLineChart();
</script>
<script src="./js/charts.js"</script>
</body>
</html>